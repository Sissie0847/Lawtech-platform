# LawGeek 运营台 - 工作流程指南

## 📋 概述

LawGeek 运营台是一个法律科技资讯的一站式管理工具，帮助运营人员高效完成从数据获取到内容发布的全流程。

```
📥 数据获取 → 📊 数据总览 → 📋 资讯审阅 → 🚀 内容发布 → 📦 归档
```

---

## 🔄 完整工作流

### 第一步：数据获取

**命令：**
```bash
python fetch.py
```

**功能：**
- 从 Meme 新闻系统自动获取当天的法律科技资讯
- AI 自动分析并分类每条新闻（🔥强烈推荐 / 👍推荐 / 📄一般）
- 数据保存到 `news_database.csv`

**可选参数：**
```bash
# 获取指定日期的数据、-d 或 --date	单独获取某一天的数据
python fetch.py --date 2024-12-01
```
# 获取日期范围内的数据
python fetch.py --start 2025-11-29 --end 2025-12-02

**输出：**
- 新闻标题、链接、来源
- AI 分类和理由
- 评分和原文内容

---

### 第二步：启动运营台

**命令：**
```bash
python -m streamlit run app.py
```

**访问地址：** http://localhost:8501

---

### 第三步：数据总览

在「📊 数据总览」Tab 中：

1. 查看导入的资讯总数
2. 了解各状态分布：
   - **全部** - 所有资讯数量
   - **入库** - 标记为发布的数量
   - **待审** - 等待审阅的数量
   - **垃圾** - 标记为垃圾的数量
3. 浏览完整数据表格

---

### 第四步：资讯审阅

在「📋 资讯审阅」Tab 中：

1. **查看 AI 分类**
   - 🔥 **强烈推荐** - AI 认为非常有价值
   - 👍 **推荐** - AI 认为值得关注
   - 📄 **一般** - AI 认为价值一般

2. **快速审阅**
   - 每条新闻右上角有下拉框
   - 选择「入库」- 标记为发布
   - 选择「垃圾」- 标记为跳过

3. **保存更改**
   - 点击右上角「💾 保存」按钮
   - 所有标记会保存到数据库

4. **筛选查看**
   - 待审核 - 未处理的新闻
   - 入库 - 已标记发布的
   - 垃圾 - 已标记跳过的
   - 已发布 - 历史已发布的
   - 全部 - 所有新闻

---

### 第五步：内容发布

在「🚀 内容发布」Tab 中：

#### 5.1 调整发布顺序
- 左侧表格显示所有「入库」的文章
- 在「调整」列输入数字（1, 2, 3...）
- 数字越小，排序越靠前
- 点击「💾 保存排序」

#### 5.2 预览发布顺序
- 右侧显示最终发布顺序
- 确认顺序无误

#### 5.3 发布到飞书
1. 输入期号（如 `12`）
2. 点击「📤 发布飞书」
3. 系统生成飞书文档（仅预览）
4. 点击链接查看生成的文档

#### 5.4 其他发布格式
- **📱 公众号** - 生成微信公众号 HTML   复制到微信公众号，用一半的编辑源代码功能
- **🃏 卡片** - 生成资讯卡片图片 点击保存后  python card_generator.py
- **💬 文案** - 生成社群分享文案

---

### 第六步：归档

确认飞书文档无误后：

1. 确保已输入期号
2. 点击「📦 归档」按钮
3. 系统自动：
   - 将文章标记为「已发布 vol.XX」
   - 导出存档文件到 `archive/vol_XX.csv`

⚠️ **注意：归档后无法撤销**

---

## 📁 项目文件说明

| 文件 | 说明 |
|------|------|
| `fetch.py` | 数据获取脚本 |
| `app.py` | Streamlit 运营台主程序 |
| `publish_feishu.py` | 飞书发布模块 |
| `wechat_format.py` | 微信公众号格式化 |
| `card_generator.py` | 资讯卡片生成器 |
| `community_copy.py` | 社群文案生成器 |
| `ai_highlight.py` | AI 分类模块 |
| `config.py` | 配置文件（API 密钥等） |
| `news_database.csv` | 新闻数据库 |
| `archive/` | 归档文件夹 |

---

## 🔧 常见操作

### 测试飞书连接
- 点击右上角「🔌 测试」按钮
- 显示连接成功或失败

### 查看帮助
- 点击右上角「❓ 帮助」按钮
- 查看完整使用指南

### 重新获取数据
```bash
# 获取今天的数据（会追加到现有数据）
python fetch.py
```

---

## 💡 最佳实践

1. **每日流程**
   - 早上运行 `fetch.py` 获取新数据
   - 在运营台中快速审阅
   - 标记入库的文章，调整顺序
   - 发布飞书预览，确认后归档

2. **效率技巧**
   - 信任 AI 的「强烈推荐」分类
   - 使用筛选器快速定位待审核
   - 一次性审阅完再保存

3. **注意事项**
   - 发布飞书是预览，不会自动归档
   - 归档是最终操作，请确认无误
   - 定期检查 `archive/` 文件夹备份

---

## 🚀 快速开始

```bash
# 1. 激活虚拟环境
venv\Scripts\activate

# 2. 获取今日数据
python fetch.py

# 3. 启动运营台
streamlit run app.py

# 4. 打开浏览器访问
# http://localhost:8501
```

---

*LawGeek 运营台 - 让法律科技资讯运营更高效* ⚖️

